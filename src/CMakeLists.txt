aux_source_directory(. DIR_SRCS)
add_executable(lpac ${DIR_SRCS})
set_target_properties(lpac PROPERTIES RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/output")

if (APPLE)
    set_target_properties(lpac PROPERTIES LINK_FLAGS "-flto -Wl")
else()
    set_target_properties(lpac PROPERTIES LINK_FLAGS "-flto -s -Wl,--build-id=none")
endif()

target_link_libraries(lpac euicc)
target_link_libraries(lpac cjson-static)

option(LINUX_MINGW32 "Build for windows on Linux" OFF)
if(LINUX_MINGW32)
    include_directories(mingw32)
    add_subdirectory(mingw32)
    target_link_libraries(lpac dlfcn-win32)
else()
    target_link_libraries(lpac dl)
endif()
